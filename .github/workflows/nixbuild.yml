name: Nixbuild demo

on:
  pull_request:
  push:
    branches:
      - master

jobs:
  demo:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: "Install Nix ❄️"
        uses: cachix/install-nix-action@v18
      #- uses: nixbuild/nixbuild-action@v15
      #  with:
          #generate_summary_for: 'demo'
      #- run: nix build .#home-hdmi
      - uses: nixbuild/nixbuild-action/.github/workflows/ci-workflow.yml@v15
        secrets:
          nixbuild_ssh_key: ${{ secrets.NIXBUILD_SSH_KEY }}
        inputs:
          filter_builds = '.top_attr == "packages"'
